
рџљ‚ Depot Safety AI вЂ” СЃРёСЃС‚РµРјР° Р°РЅР°Р»РёР·Р° Р±РµР·РѕРїР°СЃРЅРѕСЃС‚Рё РґРµРїРѕ РЅР° РѕСЃРЅРѕРІРµ CV Рё Р°РЅР°Р»РёС‚РёРєРё

Depot Safety AI вЂ” СЌС‚Рѕ СЃРёСЃС‚РµРјР° РєРѕРјРїСЊСЋС‚РµСЂРЅРѕРіРѕ Р·СЂРµРЅРёСЏ Рё Р°РЅР°Р»РёР·Р° Р±РµР·РѕРїР°СЃРЅРѕСЃС‚Рё, РєРѕС‚РѕСЂР°СЏ:
 вЂў РґРµС‚РµРєС‚РёСЂСѓРµС‚ СЃРѕС‚СЂСѓРґРЅРёРєРѕРІ Рё РїРѕРµР·Рґ РЅР° РІРёРґРµРѕ,
 вЂў РѕРїСЂРµРґРµР»СЏРµС‚ Р·РѕРЅС‹ Р±РµР·РѕРїР°СЃРЅРѕСЃС‚Рё (Р·РµР»С‘РЅР°СЏ, Р¶С‘Р»С‚Р°СЏ, РєСЂР°СЃРЅР°СЏ),
 вЂў РєР»Р°СЃСЃРёС„РёС†РёСЂСѓРµС‚ РґРµР№СЃС‚РІРёСЏ Р»СЋРґРµР№ (walk / stand / squat),
 вЂў С„РёРєСЃРёСЂСѓРµС‚ РЅР°СЂСѓС€РµРЅРёСЏ Рё РѕРїР°СЃРЅС‹Рµ СЃРёС‚СѓР°С†РёРё,
 вЂў Р»РѕРіРёСЂСѓРµС‚ РґР°РЅРЅС‹Рµ РїРѕ РІСЂРµРјРµРЅРЅС‹Рј РѕРєРЅР°Рј,
 вЂў РѕС‚РїСЂР°РІР»СЏРµС‚ Р»РѕРіРё РІ Р±Р°Р·Сѓ РґР°РЅРЅС‹С…,
 вЂў РїСЂРµРґРѕСЃС‚Р°РІР»СЏРµС‚ Р°РЅР°Р»РёС‚РёС‡РµСЃРєРёР№ backend Рё risk score РїРѕ СЃРјРµРЅР°Рј.

РЎРёСЃС‚РµРјР° СЂР°Р·СЂР°Р±РѕС‚Р°РЅР° РєР°Рє MVP РґР»СЏ РїСЂРѕРјС‹С€Р»РµРЅРЅРѕР№ Р±РµР·РѕРїР°СЃРЅРѕСЃС‚Рё РЅР° РѕР±СЉРµРєС‚Р°С… С‚РёРїР° РґРµРїРѕ.

вё»

рџ“‚ РЎС‚СЂСѓРєС‚СѓСЂР° РїСЂРѕРµРєС‚Р°
 вЂў run_track_log_final.py вЂ” CV-РјРѕРґСѓР»СЊ: YOLO + Pose + ByteTrack, Р°РЅР°Р»РёР· Р·РѕРЅ, СЂРѕР»РµР№, РґРµР№СЃС‚РІРёР№, С„РѕСЂРјРёСЂРѕРІР°РЅРёРµ Р»РѕРіРѕРІ
 вЂў import_jsonl_to_sqlite.py вЂ” РёРјРїРѕСЂС‚ Р»РѕРіРѕРІ (JSONL) РІ SQLite
 вЂў backend.py вЂ” FastAPI backend: API, Р°РіСЂРµРіР°С†РёСЏ, risk index
 вЂў windows.db вЂ” SQLite Р±Р°Р·Р° (СЃРѕР·РґР°С‘С‚СЃСЏ Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєРё)
 вЂў weights/ вЂ” РјРѕРґРµР»Рё YOLO11x Рё YOLO-Pose
 вЂў data/ вЂ” С‚РµСЃС‚РѕРІС‹Рµ РІРёРґРµРѕСЂРѕР»РёРєРё (РЅР°РїСЂРёРјРµСЂ, СЂРµРјРѕРЅС‚С‹.mov)
 вЂў logs/ вЂ” JSONL Р»РѕРіРё РІСЂРµРјРµРЅРЅС‹С… РѕРєРѕРЅ (windows_simple.jsonl)
 вЂў README.md вЂ” РѕРїРёСЃР°РЅРёРµ РїСЂРѕРµРєС‚Р°

вё»

рџ§  1. CV-РјРѕРґСѓР»СЊ (run_track_log_final.py)

CV-РјРѕРґСѓР»СЊ РІС‹РїРѕР»РЅСЏРµС‚:
 вЂў Р”РµС‚РµРєС†РёСЋ Р»СЋРґРµР№ Рё РїРѕРµР·РґР° (YOLO11x)
 вЂў POSE-Р°РЅР°Р»РёР· Р»СЋРґРµР№ (YOLO-Pose)
 вЂў РўСЂРµРєРёРЅРі ID (ByteTrack)
 вЂў РћРїСЂРµРґРµР»РµРЅРёРµ РїРѕР·С‹: stand / walk / squat
 вЂў РћРїСЂРµРґРµР»РµРЅРёРµ СЂРѕР»Рё СЃРѕС‚СЂСѓРґРЅРёРєР° (orange, blue, white, red, noname)
 вЂў РћРїСЂРµРґРµР»РµРЅРёРµ Р·РѕРЅС‹, РІ РєРѕС‚РѕСЂРѕР№ РЅР°С…РѕРґРёС‚СЃСЏ С‡РµР»РѕРІРµРє (С‡РµСЂРµР· РїРѕР»РёРіРѕРЅС‹)
 вЂў РћРїСЂРµРґРµР»РµРЅРёРµ РЅР°СЂСѓС€РµРЅРёР№ РїРѕ СЂРѕР»СЏРј Рё Р·РѕРЅР°Рј
 вЂў РћРїСЂРµРґРµР»РµРЅРёРµ РѕРїР°СЃРЅС‹С… СЃРёС‚СѓР°С†РёР№
 вЂў РўСЂРµРєРёРЅРі РјРµРґР»РµРЅРЅРѕРіРѕ РґРІРёР¶РµРЅРёСЏ РїРѕРµР·РґР°
 вЂў Р›РѕРіРёСЂРѕРІР°РЅРёРµ СЃРѕР±С‹С‚РёР№ РІ 10-СЃРµРєСѓРЅРґРЅС‹Рµ РѕРєРЅР°

РљР°Р¶РґРѕРµ РѕРєРЅРѕ СЃРѕРґРµСЂР¶РёС‚:
 вЂў РєРѕР»РёС‡РµСЃС‚РІРѕ Р»СЋРґРµР№ РІ РєР°Р¶РґРѕР№ Р·РѕРЅРµ,
 вЂў РєРѕР»РёС‡РµСЃС‚РІРѕ СѓР±РѕСЂС‰РёРєРѕРІ, СЂРµР°Р»СЊРЅРѕ РІС‹РїРѕР»РЅСЏСЋС‰РёС… СЂР°Р±РѕС‚Сѓ,
 вЂў РєРѕР»РёС‡РµСЃС‚РІРѕ РЅР°СЂСѓС€РµРЅРёР№,
 вЂў РєРѕР»РёС‡РµСЃС‚РІРѕ РѕРїР°СЃРЅС‹С… СЃРёС‚СѓР°С†РёР№,
 вЂў СЃС‚Р°С‚СѓСЃ РїРѕРµР·РґР° (РїСЂРёСЃСѓС‚СЃС‚РІСѓРµС‚, РїСЂРёР±С‹Р», СѓРµС…Р°Р»).

Р›РѕРіРё СЃРѕС…СЂР°РЅСЏСЋС‚СЃСЏ РІ:

logs/windows_simple.jsonl


вё»

рџ—„ 2. РЎРІСЏР·СЊ Р»РѕРіРѕРІ СЃ Р±Р°Р·РѕР№ (SQLite)

Р¤Р°Р№Р» import_jsonl_to_sqlite.py:
 вЂў СЃРѕР·РґР°С‘С‚ Р±Р°Р·Сѓ РґР°РЅРЅС‹С… windows.db,
 вЂў СЃРѕР·РґР°С‘С‚ С‚Р°Р±Р»РёС†Сѓ window_analytics,
 вЂў Р·Р°РіСЂСѓР¶Р°РµС‚ СЃС‚СЂРѕРєРё РёР· windows_simple.jsonl РІ С‚Р°Р±Р»РёС†Сѓ.

РўР°Р±Р»РёС†Р° СЃРѕРґРµСЂР¶РёС‚:
 вЂў РёРЅРґРµРєСЃ РѕРєРЅР°,
 вЂў РІСЂРµРјСЏ РЅР°С‡Р°Р»Р°/РєРѕРЅС†Р° РѕРєРЅР°,
 вЂў РєРѕР»РёС‡РµСЃС‚РІРѕ СЃРѕС‚СЂСѓРґРЅРёРєРѕРІ РІ Р·РѕРЅР°С…,
 вЂў РєРѕР»РёС‡РµСЃС‚РІРѕ СѓР±РѕСЂС‰РёРєРѕРІ,
 вЂў РЅР°СЂСѓС€РµРЅРёСЏ,
 вЂў РѕРїР°СЃРЅС‹Рµ СЃРёС‚СѓР°С†РёРё,
 вЂў СЃРѕР±С‹С‚РёСЏ РїРѕРµР·РґР°,
 вЂў РЅРѕРјРµСЂ РїРѕРµР·РґР° (РµСЃР»Рё РµСЃС‚СЊ).

вё»

рџ–Ґ 3. Backend (FastAPI)

Р¤Р°Р№Р» backend.py РїСЂРµРґРѕСЃС‚Р°РІР»СЏРµС‚ API:
 вЂў /windows вЂ” РІС‹РґР°С‘С‚ СЃС‹СЂС‹Рµ РґР°РЅРЅС‹Рµ РѕРєРѕРЅ
 вЂў /aggregate?interval_sec=60 вЂ” Р°РіСЂРµРіРёСЂСѓРµС‚ РѕРєРЅР° РїРѕ РїСЂРѕРёР·РІРѕР»СЊРЅРѕРјСѓ РёРЅС‚РµСЂРІР°Р»Сѓ (1 РјРёРЅСѓС‚Р°, 5 РјРёРЅСѓС‚, СЃРјРµРЅР°)
 вЂў /risk_index вЂ” РІС‹С‡РёСЃР»СЏРµС‚ РѕР±С‰РёР№ РёРЅРґРµРєСЃ СЂРёСЃРєР° Р·Р° РёРЅС‚РµСЂРІР°Р»

Backend РїРѕРґРєР»СЋС‡Р°РµС‚СЃСЏ Рє SQLite Р±Р°Р·Рµ windows.db.

API РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ С„СЂРѕРЅС‚РµРЅРґРѕРј РёР»Рё Р°РЅР°Р»РёС‚РёС‡РµСЃРєРёРјРё РёРЅСЃС‚СЂСѓРјРµРЅС‚Р°РјРё.

вё»

рџ“Љ 4. РђРЅР°Р»РёС‚РёРєР° Рё Risk Index

РђРіСЂРµРіР°С†РёСЏ:
 вЂў РЎС‹СЂС‹Рµ РѕРєРЅР° = 10 СЃРµРє
 вЂў РРЅС‚РµСЂРІР°Р»С‹ РјРѕРіСѓС‚ Р±С‹С‚СЊ Р»СЋР±С‹РјРё: 30 СЃРµРє, 1 РјРёРЅ, 5 РјРёРЅ, 15 РјРёРЅ, СЃРјРµРЅР°

Risk Index:
 вЂў СѓС‡РёС‚С‹РІР°РµС‚ РЅР°СЂСѓС€РµРЅРёСЏ,
 вЂў РѕРїР°СЃРЅС‹Рµ СЃРёС‚СѓР°С†РёРё,
 вЂў Р»СЋРґРµР№ РІ РєСЂР°СЃРЅРѕР№ Р·РѕРЅРµ,
 вЂў РїРѕРµР·Рґ СЂСЏРґРѕРј СЃ Р»СЋРґСЊРјРё.

РРЅРґРµРєСЃ РЅРѕСЂРјР°Р»РёР·СѓРµС‚СЃСЏ РЅР° С€РєР°Р»Сѓ 0вЂ“100:
 вЂў 0вЂ“30 вЂ” РЅРёР·РєРёР№ СЂРёСЃРє
 вЂў 30вЂ“70 вЂ” СЃСЂРµРґРЅРёР№ СЂРёСЃРє
 вЂў 70вЂ“100 вЂ” РІС‹СЃРѕРєРёР№ СЂРёСЃРє

РўР°РєР¶Рµ С„РѕСЂРјРёСЂСѓРµС‚СЃСЏ С‚РѕРї СЃР°РјС‹С… РѕРїР°СЃРЅС‹С… РІСЂРµРјРµРЅРЅС‹С… РѕРєРѕРЅ.

вё»

рџЊђ 5. РЎС‚РµРє С‚РµС…РЅРѕР»РѕРіРёР№
 вЂў YOLO11x вЂ” РґРµС‚РµРєС†РёСЏ
 вЂў YOLO11x-pose вЂ” РїРѕР·С‹ С‡РµР»РѕРІРµРєР°
 вЂў ByteTrack вЂ” СЃС‚Р°Р±РёР»СЊРЅС‹Р№ С‚СЂРµРєРёРЅРі ID
 вЂў OpenCV вЂ” РѕР±СЂР°Р±РѕС‚РєР° Рё РѕС‚СЂРёСЃРѕРІРєР°
 вЂў FastAPI вЂ” backend
 вЂў SQLite вЂ” Р±Р°Р·Р° РґР°РЅРЅС‹С…
 вЂў JSONL вЂ” С„РѕСЂРјР°С‚ Р»РѕРіРѕРІ

вё»

вљ™пёЏ 6. Pipeline СЃРёСЃС‚РµРјС‹
 1. РљР°РјРµСЂР° в†’ РІРёРґРµРѕРїРѕС‚РѕРє
 2. CV-РјРѕРґСѓР»СЊ РґРµС‚РµРєС‚РёСЂСѓРµС‚ РѕР±СЉРµРєС‚С‹, РѕРїСЂРµРґРµР»СЏРµС‚ Р·РѕРЅС‹, СЂРѕР»Рё, РґРµР№СЃС‚РІРёСЏ
 3. Р¤РѕСЂРјРёСЂСѓСЋС‚СЃСЏ СЃРѕР±С‹С‚РёСЏ Рё Р»РѕРіРё РїРѕ РѕРєРЅР°Рј
 4. JSONL РёРјРїРѕСЂС‚РёСЂСѓСЋС‚СЃСЏ РІ SQLite
 5. Backend РІС‹РґР°С‘С‚ РґР°РЅРЅС‹Рµ
 6. РђРЅР°Р»РёС‚РёРєР° СЃС‚СЂРѕРёС‚ РіСЂР°С„РёРєРё, СЂРёСЃРєРё, РѕС‚С‡С‘С‚С‹
 7. (РћРїС†РёРѕРЅР°Р»СЊРЅРѕ) С„СЂРѕРЅС‚ РїРѕРєР°Р·С‹РІР°РµС‚ dashboard

вё»

рџљЂ 7. Killer-С„РёС‡Рё РїСЂРѕРµРєС‚Р°
 вЂў Р”РµС‚Р°Р»СЊРЅРѕРµ СЂР°Р·РґРµР»РµРЅРёРµ Р·РѕРЅ (polyline safety zones)
 вЂў РўРѕС‡РЅС‹Р№ С‚СЂРµРєРёРЅРі Р»СЋРґРµР№ Рё РїРѕР·
 вЂў РђРЅР°Р»РёР· СЂРѕР»Рё СЃРѕС‚СЂСѓРґРЅРёРєРѕРІ (С†РІРµС‚ С„РѕСЂРјС‹)
 вЂў РђРІС‚РѕРјР°С‚РёС‡РµСЃРєРѕРµ РІС‹СЏРІР»РµРЅРёРµ РѕРїР°СЃРЅС‹С… СЃРёС‚СѓР°С†РёР№
 вЂў РђРЅР°Р»РёС‚РёРєР° СЃ РіРёР±РєРёРј РІС‹Р±РѕСЂРѕРј РїРµСЂРёРѕРґР°
 вЂў РРЅРґРµРєСЃ СЂРёСЃРєР° СЃРјРµРЅС‹ (risk score)
 вЂў Р­РєРѕРЅРѕРјРёС‡РµСЃРєРёР№ СЌС„С„РµРєС‚: СЃРЅРёР¶РµРЅРёРµ Р°РІР°СЂРёР№ Рё СЂСѓС‡РЅРѕРіРѕ С‚СЂСѓРґР°

вё»

рџ“€ 8. Р­РєРѕРЅРѕРјРёС‡РµСЃРєРёР№ СЌС„С„РµРєС‚

РќР° РѕСЃРЅРѕРІРµ Р°РЅР°Р»РёС‚РёРєРё:
 вЂў СЃРЅРёР¶РµРЅРёРµ Р°РІР°СЂРёР№ РґРѕ 30%
 вЂў СЌРєРѕРЅРѕРјРёСЏ РІСЂРµРјРµРЅРё РёРЅР¶РµРЅРµСЂРѕРІ вЂ” 50 С‡Р°СЃРѕРІ РІ РјРµСЃСЏС†
## Дополнительная документация
- [Пошаговый запуск проекта](docs/run.md)
